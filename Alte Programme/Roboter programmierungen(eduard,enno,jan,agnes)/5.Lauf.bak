

#define __NOTETIME   10
#define __WAITTIME   12                     // Team: FireWave




task main()
{
SetPower(OUT_A,9);
SetPower(OUT_B,6);
SetSensor(SENSOR_1,SENSOR_LIGHT);
SetSensor(SENSOR_3,SENSOR_LIGHT);
SetSensor(SENSOR_2,SENSOR_LIGHT);




   ClearTimer(2);

   while(true)
   {
     
     // Beginn Linie fahren
     if (SENSOR_1 >=44 && SENSOR_1 <=47)
     {
      OnRev(OUT_A+OUT_B);   // rück
      Wait(6);
      OnRev(OUT_A);         //links
      OnFwd(OUT_B);
      Wait(20);
     }
     else
     {
        OnFwd(OUT_A+OUT_B);  //vor
     }

     if (SENSOR_3 >=44 && SENSOR_3 <=47)
     {
      OnRev(OUT_A+OUT_B);   //rück
      Wait(6);
      OnRev(OUT_B);         //rechts
      OnFwd(OUT_A);
      Wait(20);
     }
     else
     {
        OnFwd(OUT_A+OUT_B);   //vor
     }
     // Ende Linie fahren
     
     // Beginn Grün
      
      if((SENSOR_1 >=50 && SENSOR_1 <=54 ) && (SENSOR_2 >=45)  && (SENSOR_2 <=48) || (SENSOR_2 >=45) && (SENSOR_2 <=48) && (SENSOR_3 >=49) && (SENSOR_3 <=52  ))  // Grün gefunden
      {
        if(Timer(2)>15)
        {
          Off(OUT_A+OUT_B);     //aus
          OnFwd(OUT_C);         //leuchten
          Wait(150);
          PlayTone(262,4*__NOTETIME);
          Wait(4*__WAITTIME);
          PlayTone(294,4*__NOTETIME);
          Wait(4*__WAITTIME);
          PlayTone(330,4*__NOTETIME);
          Wait(4*__WAITTIME);
          PlayTone(262,4*__NOTETIME);
          Wait(4*__WAITTIME);
          Off(OUT_C);
          OnRev(OUT_A+OUT_B); //rück
          Wait(10);
          ClearTimer(2);
        }
      }
     // Ende grün

      // Beginn silber

      if((SENSOR_2 > 64 && SENSOR_3 > 70)||(SENSOR_1 >72 && SENSOR_2 > 64 )) // Silber gefunden
      {
       if(Timer(2)>15)
       {
         Off(OUT_A+OUT_B);   //aus
         OnFwd(OUT_C);      //leuchten
         Wait(150);
         PlayTone(440,4*__NOTETIME);
         PlayTone(659,4*__NOTETIME);
         Wait(4*__WAITTIME);
         PlayTone(494,4*__NOTETIME);
         Wait(4*__WAITTIME);
         Off(OUT_C);
         Wait(200);
         OnRev(OUT_A+OUT_B);  //rück
         Wait(10);
         ClearTimer(2);
       }
      }// ende silber



      //Beginn Stein

      if (SENSOR_2 > 99)
      {
       OnRev(OUT_A+OUT_B); //A rück B rück
       Wait(50);
       OnFwd(OUT_A); OnRev(OUT_B);// Rechts
       Wait(115);
       OnFwd(OUT_A+OUT_B); //Vorwärts
       Wait(300);
       OnRev(OUT_A);OnFwd(OUT_B); //links
       Wait(100);
       OnFwd(OUT_A+OUT_B); // Vorwärts
       Wait(400);
       OnRev(OUT_A);OnFwd(OUT_B); //links
       Wait(50);
       OnFwd(OUT_A+OUT_B); //Vorwärts
       Wait(200);
       OnFwd(OUT_A); OnRev(OUT_B);// Rechts
       Wait(30);

       while(SENSOR_1>51 && SENSOR_2>51)
       {
         OnFwd(OUT_A+OUT_B);   //vor
         
                            if(SENSOR_1<51 || SENSOR_2<51 || SENSOR_3<51 )
                            {
                             OnFwd(OUT_A+OUT_B);   //vor
                             Wait(60);

                              while(SENSOR_2>51)
                              { OnFwd(OUT_A); //rechts
                                OnRev(OUT_B);
                                }
                            }
       }// Ende while


        OnFwd(OUT_A); OnRev(OUT_B);// Rechts
        Wait(60);




    }//ende stein


                     
    if(SENSOR_1 >99)     //Rote Zone Sensor
     {
       OnRev(OUT_A+OUT_B); //rück
       Wait(20);
       OnRev(OUT_A);      //links
       OnFwd(OUT_B);
       Wait(180);
     }
     else
     {
       OnFwd(OUT_A+OUT_B);  //vor
     }

 }  //ende while(true)
} //ende task main





